{% extends "base.html" %}
{% load i18n %}

{% block title %}{% trans "Главная" %} | eWork{% endblock %}

{% block content %}
<div class="mt-3">
    <!-- Поисковая форма -->
    <div class="mb-4">
        <form id="search-form" method="get" action="{% url 'home' %}">
            <div class="input-group">
                <span class="input-group-text bg-white border-end-0" aria-hidden="true">
                    <i class="bi bi-search"></i>
                </span>
                <input
                    type="search"
                    name="q"
                    class="form-control border-start-0 shadow-none"
                    placeholder="{% trans 'Поиск...' %}"
                    value="{{ search_query }}"
                    aria-label="{% trans 'Поле поиска' %}">
            </div>
        </form>
    </div>

    <!-- Навигация вкладок -->
    <div class="container-fluid px-0">
        <ul class="nav nav-tabs nav-fill mb-3" id="mainTab" role="tablist">
            <li class="nav-item" role="presentation">
                <button class="nav-link active"
                        id="jobs-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#jobs-pane"
                        type="button"
                        role="tab"
                        aria-controls="jobs-pane"
                        aria-selected="true"
                        hx-get="{% url 'jobs-list' %}?q={{ search_query }}"
                        hx-target="#jobs-pane"
                        hx-swap="innerHTML">
                    <i class="bi bi-briefcase"></i> <span>{% trans "Вакансии" %}</span>
                </button>
            </li>
            <li class="nav-item" role="presentation">
                <button class="nav-link"
                        id="services-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#services-pane"
                        type="button"
                        role="tab"
                        aria-controls="services-pane"
                        aria-selected="false"
                        hx-get="{% url 'services-list' %}?q={{ search_query }}"
                        hx-target="#services-pane"
                        hx-swap="innerHTML">
                    <i class="bi bi-tools"></i> <span>{% trans "Услуги" %}</span>
                </button>
            </li>
        </ul>
    </div>

    <div class="tab-content" id="mainTabContent">
        <div class="tab-pane fade show active" id="jobs-pane" role="tabpanel" aria-labelledby="jobs-tab">
            {% include 'partials/jobs.html' %}
        </div>
        <div class="tab-pane fade" id="services-pane" role="tabpanel" aria-labelledby="services-tab">
            {% include 'partials/services.html' %}
        </div>
    </div>
</div>
{% endblock %}

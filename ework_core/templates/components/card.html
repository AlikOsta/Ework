{% load i18n %}

<!-- Кнопки подкатегорий с HTMX -->
{% if categories %}
<div class="mb-3">
    <div class="d-flex flex-wrap gap-2">
        <!-- Кнопка "Показать все" -->
        <button type="button" 
                class="btn btn-sm {% if not sub_rubric %}btn-primary{% else %}btn-outline-primary{% endif %}"
                hx-get="{% url 'core:post_list_by_rubric' rubric_pk %}"
                hx-target="#content-area"
                hx-swap="innerHTML">
            {% trans "Показать все" %}
        </button>
        
        <!-- Кнопки подкатегорий -->
        {% for category in categories %}
        <button type="button" 
                class="btn btn-sm {% if sub_rubric == category.id|stringformat:'s' %}btn-primary{% else %}btn-outline-primary{% endif %}"
                hx-get="{% url 'core:post_list_by_rubric' rubric_pk %}?sub_rubric={{ category.id }}"
                hx-target="#content-area"
                hx-swap="innerHTML">
            {% trans category.name %}
        </button>
        {% endfor %}
    </div>
</div>
{% endif %}


{% include 'components/filter.html' %}

{% if posts %}
<div class="tab-content" id="myTabContent">
  <div class="tab-pane fade show active" id="work" role="tabpanel" aria-labelledby="work-tab">
    <div class="row row-cols-2 row-cols-sm-3 row-cols-md-4 g-3 mb-4">
      {% for post in posts %}
      <div class="col">
        {% include 'components/unified_card.html' with post=post show_seller=True show_controls=False favorite_post_ids=favorite_post_ids %}
      </div>
      {% endfor %}
    </div>
  </div>
</div>
{% else %}
    <div class="col-12 text-center py-5">
        <div class="empty-icon mb-3">
            <i class="material-icons text-muted fs-1">search</i>
        </div>
        <h5 class="mb-3">
            {% trans "Объявления не найдены" %}
        </h5>
        <p class="text-muted">
            {% trans "По вашему запросу ничего не найдено." %}
        </p>
    </div>
{% endif %}

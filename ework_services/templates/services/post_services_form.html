{% load widget_tweaks %}
{% load i18n %}

{% with WIDGET_ERROR_CLASS="is-invalid" %}
<form hx-post="{{ request.path }}" hx-target="this" hx-swap="outerHTML" class="modal-content">
    {% csrf_token %}

    <div class="modal-header">
        <h5 class="modal-title" id="createPostModalLabel">{% trans "Разместить услугу" %}</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="{% trans "Закрыть" %}"></button>
    </div>

    <div class="modal-body">
        <!-- Основная информация -->
        <div class="mb-3">
            <label for="{{ form.title.id_for_label }}" class="form-label">{% trans "Название услуги" %}</label>
            {% render_field form.title class="form-control" error_class=WIDGET_ERROR_CLASS placeholder="Укажите название услуги" %}
            <div class="invalid-feedback">{{ form.title.errors|first }}</div>
        </div>

        <div class="mb-3">
            <label for="{{ form.description.id_for_label }}" class="form-label">{% trans "Описание услуги" %}</label>
            {% render_field form.description class="form-control" error_class=WIDGET_ERROR_CLASS placeholder="Укажите описание услуги" rows="5" %}
            <div class="invalid-feedback">{{ form.description.errors|first }}</div>
        </div>

        <!-- Финансовая информация -->
        <div class="row mb-3">
            <div class="col-8">
                <label for="{{ form.price.id_for_label }}" class="form-label">{% trans "Оплата" %}</label>
                {% render_field form.price class="form-control" error_class=WIDGET_ERROR_CLASS placeholder="Стоимость" %}
                <div class="invalid-feedback">{{ form.price.errors|first }}</div>
            </div>
            <div class="col-4">
                <label for="{{ form.currency.id_for_label }}" class="form-label">{% trans "Валюта" %}</label>
                {% render_field form.currency class="form-control" error_class=WIDGET_ERROR_CLASS %}
                <div class="invalid-feedback">{{ form.currency.errors|first }}</div>
            </div>
        </div>

        <!-- Город -->
        <div class="mb-3">
            <label for="{{ form.city.id_for_label }}" class="form-label">{% trans "Город" %}</label>
            {% render_field form.city class="form-control" error_class=WIDGET_ERROR_CLASS %}
            <div class="invalid-feedback">{{ form.city.errors|first }}</div>
        </div>

        <!-- Рубрика -->
        <div class="mb-3">
            <label for="{{ form.sub_rubric.id_for_label }}" class="form-label">{% trans "Рубрика" %}</label>
            {% render_field form.sub_rubric class="form-control" error_class=WIDGET_ERROR_CLASS %}
            <div class="invalid-feedback">{{ form.sub_rubric.errors|first }}</div>
        </div>

                <!-- Телефон для связи -->
        <div class="mb-3">
            <label for="{{ form.user_phone.id_for_label }}" class="form-label">{% trans "Телефон для связи" %}</label>
            {% render_field form.user_phone class="form-control" error_class=WIDGET_ERROR_CLASS placeholder="+7 (XXX) XXX-XX-XX" %}
            <div class="invalid-feedback">{{ form.user_phone.errors|first }}</div>
            <div class="form-text">{% trans "Укажите номер телефона для связи с вами" %}</div>
        </div>

    <!-- Кнопки управления -->
        <div class="d-grid gap-3 d-md-flex justify-content-md-end">
            <button type='button' class='btn btn-secondary' data-bs-dismiss='modal'>{% trans "Отмена" %}</a>
            <button type="submit" class="btn btn-primary">{% trans "Опубликовать" %}</button>
        </div> 

    </div>

</form>

{% endwith %}

